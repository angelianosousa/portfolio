<%= form_with(model: [:backoffice, stack], local: true) do |form| %>
  <% if stack.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(stack.errors.count, "error") %> prohibited this stack from being saved:</h2>

      <ul>
      <% stack.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class='columns is-centered'>
    <div class='column'>
      <div class="field">
        <label class="label">Titulo da Stack:</label>
        <div class='control'>
          <%= form.text_field :name, class:"input is-link is-rounded is-focused" %>
        </div>
      </div>
    </div>
    <div class='column'>
      <div class="field">
        <label class='label'>Imagem: </label>
        <div class="file">
          <label class="file-label">
            <div class="image is-128x128">
              <%= stack.picture.attached? ? cl_image_tag(url_for(stack.picture), :transformation => { :width => 400, :crop => "pad" }) : image_tag("https://bulma.io/images/placeholders/1280x960.png", class:"image is-64x64") %>
            </div>
            <br>
            <%= form.file_field :picture, class:"file-input is-link is-rounded" %>
            <span class="file-cta">
              <span class="file-icon">
                <i class="fas fa-upload"></i>
              </span>
              <span class="file-label">
                Escolha uma imagemâ€¦
              </span>
            </span>
          </label>
        </div>
      </div>
    </div>
  </div>


  <div class="actions is-grouped">
    <div class="control">
      <%= form.submit "Salvar", class:"button is-primary" %>
      <%= link_to backoffice_stacks_path, class:"button is-info" do %>
        <i class="fas fa-arrow-left"></i>
      <% end %>
    </div>
  </div>
<% end %>
