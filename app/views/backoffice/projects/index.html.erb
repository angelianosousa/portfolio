<section class='section'>
  <div class='columns is-multiline is-centered'>
    <% @projects.each do |project| %>
      <div class='column is-one-third'>

        <div class="card has-background-grey-lighter is-rounded">
          <header class="card-header">
            <div class="card-header-icon">
              <span class="icon">
                <i class="fas fa-info-circle" aria-hidden="true"></i>
              </span>
            </div>
            <p class="card-header-title">
              <%= project.title.truncate(20) %>
            </p>
          </header>

          <div class="card-image">
            <figure class="image is-2by1">
              <%= project.photo_principal.attached? ? image_tag(project.photo_principal, class:"image is-64x64") : image_tag("https://bulma.io/images/placeholders/1280x960.png") %>
            </figure>
          </div>

          <div class="card-content">
          
            <div class='columns'>
              <div class='column'>
                <p class='title is-6'>Links do projeto:</p>

                <div class="media">
                  <figure class="image is-48x48">
                    <%= link_to project.production_link, class:"tag is-warning is-large", target:"_blank" do %>
                      <% image_tag 'server.png' %>
                    <% end %>
                  </figure>&nbsp;&nbsp;
                  <figure class="image is-64x64" style="widht:50px;">
                    <%= link_to project.repository_link, class:"tag is-large", target:"_blank" do %>
                      <% image_tag 'GitHub-Emblema.png' %>
                    <% end %>
                  </figure>
                </div>
              </div>

              <div class='column'>
                <p class='title is-6'>Tecnologias:</p>

                <div class='columns is-multiline'>
                  <% project.projects_stacks.each do |project_stack| %>
                    <div class='column is-half'>
                      <div class='columns'>
                        <figure class="image is-48x48">
                          <%= project_stack.stack.picture.attached? ? image_tag(project_stack.stack.picture, title:"#{project_stack.stack.name}") : image_tag("https://bulma.io/images/placeholders/1280x960.png", class:"image is-64x64", title:"#{project_stack.stack.name}") %>
                        </figure>&nbsp;&nbsp;
                      </div>
                    </div>
                  <% end %>
                </div>
              </div>
            </div>

            <footer class="card-footer" style="padding-top:10px;">
              <%= link_to backoffice_project_path(project), class:"button card-footer-item is-link is-small is-rounded" do %>
                <i class='fas fa-eye'></i>
              <% end %>&nbsp;
              <%= link_to edit_backoffice_project_path(project), class:"button card-footer-item is-success is-small is-rounded" do %>
                <i class='fas fa-edit'></i>
              <% end %>&nbsp;
              <%= link_to backoffice_project_path(project), method: :delete, data: { confirm: "Apagar projeto: #{project.title} ?"}, class:"button card-footer-item is-small is-danger is-rounded" do %>
                <i class='fas fa-trash'></i>
              <% end %> 
            </footer>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  
  <div class='block'>
    <%= paginate @projects %>
  </div>
</section>
